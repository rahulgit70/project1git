<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	 <meta name="viewport" content="width=device-width, initial-scale=1.0">
	 <link rel="stylesheet" type="text/css" href="formval.css">
	 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ==" crossorigin="anonymous" />

</head>
<body>
	<div class="change_main">
		<div class="change_child">
			<form class="form">
				<div class="change_container">
						<label for="curr_pass"><b>CURRENT PASSWORD</b></label>
						<input type="password" name="curr_pass" class="curr_pass" placeholder="Current Password" required>
						 <i class="fas fa-check-circle"></i>
			   	   	     <i class="fas fa-exclamation-circle"></i>
			   	         <small>Error Msg</small></br>
				    </div>
				    <div class="change_container">
						<label for="change_pass"><b>CHANGE PASSWORD</b></label>
						<input type="password" name="change_pass" class="change_pass" placeholder="Change Password" required>
						 <i class="fas fa-check-circle"></i>
			   	   	    <i class="fas fa-exclamation-circle"></i>
			   	         <small>Error Msg</small></br>
				    </div>
				    <div class="change_container">
				    	<input type="submit" name="submit3" value="change" class="submit3">
				    </div>
					
				</div>
			</form>
		</div>
		
	</div>

	<script type="text/javascript">
		const form=document.querySelector('.form');
		const curr_pass=document.querySelector('.curr_pass');
		const change_pass=document.querySelector('.change_pass');

		form.addEventListener('submit',(event)=>{
		event.preventDefault();

		validation();
	});

		const validation =()=>{
			var storedPassword=localStorage.getItem('psw');

			 const change_passVal=change_pass.value.trim();

			 if(storedPassword==curr_pass.value)
			 	setSuccessMsg(curr_pass);
			 else
			 	setErrorMsg(curr_pass ,'password not match');




			 if(storedPassword==curr_pass.value)
			 {
			 	 if(change_passVal=="")
			 	 { 
	        	alert('password change failed');
			 
	    	setErrorMsg(change_pass ,'password cannot be blank');
	    }
	        else if(change_passVal.length<=5) {
	    	setErrorMsg(change_pass ,'pass should be min 6 char');
	        	alert('password change failed');
			 
	    }
	        else{
	        	localStorage.setItem('psw',change_pass.value);
	    	
	    	    setSuccessMsg(change_pass);
	    	    alert('password successfully changed');
	        }
	    }
	        else
	        	alert('password change failed');
			 

		}

  function setErrorMsg(input,errormsgs){
		const Container = input.parentElement;
		const small = Container.querySelector('small');
		Container.className = "change_container error";
		small.innerText = errormsgs;
	}

	function setSuccessMsg(input){
		const Container = input.parentElement;
		Container.className= "change_container success";
	}

	</script>

</body>
</html>